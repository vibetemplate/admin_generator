# å¼€å‘æœ€ä½³å®è·µ

æœ¬æ–‡æ¡£æä¾›äº†ä½¿ç”¨åå°ç®¡ç†ç³»ç»Ÿç”Ÿæˆå™¨å¼€å‘é¡¹ç›®çš„æœ€ä½³å®è·µå’Œç»éªŒæ€»ç»“ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„æœ€ä½³å®è·µ

### æ¨èçš„ç›®å½•ç»“æ„

```
my-admin/
â”œâ”€â”€ app/                        # Next.js App Router
â”‚   â”œâ”€â”€ globals.css            # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ layout.tsx             # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx              # é¦–é¡µ
â”‚   â”œâ”€â”€ dashboard/            # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ users/                # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ page.tsx          # ç”¨æˆ·åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx      # æ–°å»ºç”¨æˆ·
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â””â”€â”€ page.tsx      # ç¼–è¾‘ç”¨æˆ·
â”‚   â””â”€â”€ api/                  # APIè·¯ç”±
â”‚       â””â”€â”€ users/
â”‚           â””â”€â”€ route.ts
â”œâ”€â”€ components/               # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                  # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ business/            # ä¸šåŠ¡ç»„ä»¶
â”‚   â””â”€â”€ layout/              # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ lib/                     # å·¥å…·å‡½æ•°å’Œé…ç½®
â”‚   â”œâ”€â”€ api.ts              # APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ auth.ts             # è®¤è¯ç›¸å…³
â”‚   â”œâ”€â”€ permissions.ts      # æƒé™æ£€æŸ¥
â”‚   â”œâ”€â”€ utils.ts            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ validations.ts      # è¡¨å•éªŒè¯
â”œâ”€â”€ hooks/                   # è‡ªå®šä¹‰é’©å­
â”œâ”€â”€ stores/                  # çŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/                   # TypeScriptç±»å‹å®šä¹‰
â”œâ”€â”€ constants/               # å¸¸é‡å®šä¹‰
â””â”€â”€ public/                  # é™æ€èµ„æº
```

### ç»„ä»¶ç»„ç»‡åŸåˆ™

1. **æŒ‰åŠŸèƒ½åˆ†ç»„**ï¼šå°†ç›¸å…³ç»„ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸‹
2. **åˆ†å±‚è®¾è®¡**ï¼šåŸºç¡€ç»„ä»¶ â†’ ä¸šåŠ¡ç»„ä»¶ â†’ é¡µé¢ç»„ä»¶
3. **å¯å¤ç”¨æ€§**ï¼šæŠ½å–é€šç”¨é€»è¾‘ï¼Œé¿å…ä»£ç é‡å¤

```tsx
// å¥½çš„ç»„ä»¶ç»„ç»‡
components/
â”œâ”€â”€ ui/                     # åŸºç¡€ç»„ä»¶
â”‚   â”œâ”€â”€ Button/
â”‚   â”œâ”€â”€ Input/
â”‚   â””â”€â”€ Modal/
â”œâ”€â”€ business/               # ä¸šåŠ¡ç»„ä»¶
â”‚   â”œâ”€â”€ UserCard/
â”‚   â”œâ”€â”€ OrderTable/
â”‚   â””â”€â”€ ProductForm/
â””â”€â”€ layout/                 # å¸ƒå±€ç»„ä»¶
    â”œâ”€â”€ Header/
    â”œâ”€â”€ Sidebar/
    â””â”€â”€ PageContainer/
```

## ğŸ¨ UI/UX æœ€ä½³å®è·µ

### 1. è®¾è®¡ä¸€è‡´æ€§

**ä¿æŒç»Ÿä¸€çš„è®¾è®¡è¯­è¨€**

```tsx
// ä½¿ç”¨ç»Ÿä¸€çš„è®¾è®¡token
const theme = {
  colors: {
    primary: '#1890ff',
    success: '#52c41a',
    warning: '#faad14',
    error: '#ff4d4f'
  },
  spacing: {
    xs: 4,
    sm: 8,
    md: 16,
    lg: 24,
    xl: 32
  },
  borderRadius: {
    sm: 4,
    md: 6,
    lg: 8
  }
}
```

**ç»Ÿä¸€çš„ç»„ä»¶é£æ ¼**

```tsx
// ç»Ÿä¸€çš„æŒ‰é’®ä½¿ç”¨
<Button type="primary" size="large">
  ä¸»è¦æ“ä½œ
</Button>

<Button type="default" size="middle">
  æ¬¡è¦æ“ä½œ
</Button>

<Button type="text" size="small">
  è¾…åŠ©æ“ä½œ
</Button>
```

### 2. å“åº”å¼è®¾è®¡

**ä½¿ç”¨æ …æ ¼ç³»ç»Ÿ**

```tsx
<Row gutter={[16, 16]}>
  <Col xs={24} sm={12} md={8} lg={6}>
    <Card>å†…å®¹</Card>
  </Col>
</Row>
```

**é€‚é…ä¸åŒå±å¹•**

```tsx
const useBreakpoint = () => {
  const [breakpoint, setBreakpoint] = useState('lg')
  
  useEffect(() => {
    const handleResize = () => {
      const width = window.innerWidth
      if (width < 576) setBreakpoint('xs')
      else if (width < 768) setBreakpoint('sm')
      else if (width < 992) setBreakpoint('md')
      else if (width < 1200) setBreakpoint('lg')
      else setBreakpoint('xl')
    }
    
    handleResize()
    window.addEventListener('resize', handleResize)
    return () => window.removeEventListener('resize', handleResize)
  }, [])
  
  return breakpoint
}
```

### 3. äº¤äº’ä½“éªŒ

**åŠ è½½çŠ¶æ€**

```tsx
function DataTable() {
  const [loading, setLoading] = useState(false)
  
  return (
    <Table
      loading={loading}
      dataSource={data}
      columns={columns}
    />
  )
}
```

**é”™è¯¯å¤„ç†**

```tsx
const handleSubmit = async (values: FormData) => {
  try {
    setLoading(true)
    await submitForm(values)
    message.success('æäº¤æˆåŠŸ')
    router.push('/list')
  } catch (error) {
    message.error(`æäº¤å¤±è´¥: ${error.message}`)
  } finally {
    setLoading(false)
  }
}
```

**ç¡®è®¤æ“ä½œ**

```tsx
<Popconfirm
  title="ç¡®è®¤åˆ é™¤"
  description="åˆ é™¤åæ— æ³•æ¢å¤ï¼Œç¡®è®¤åˆ é™¤å—ï¼Ÿ"
  onConfirm={() => handleDelete(record)}
  okText="ç¡®è®¤"
  cancelText="å–æ¶ˆ"
>
  <Button danger>åˆ é™¤</Button>
</Popconfirm>
```

## ğŸ”’ æƒé™ç®¡ç†æœ€ä½³å®è·µ

### 1. æƒé™è®¾è®¡åŸåˆ™

**æœ€å°æƒé™åŸåˆ™**

```json
{
  "roles": [
    {
      "id": "operator",
      "name": "æ“ä½œå‘˜",
      "permissions": [
        "dashboard:view",
        "users:view",           // åªç»™å¿…éœ€çš„æƒé™
        "orders:view",
        "orders:edit"           // ä¸ç»™åˆ é™¤æƒé™
      ]
    }
  ]
}
```

**æƒé™åˆ†å±‚è®¾è®¡**

```
ç³»ç»Ÿæƒé™
â”œâ”€â”€ æ¨¡å—æƒé™ (users:*)
â”‚   â”œâ”€â”€ é¡µé¢æƒé™ (users:list:view)
â”‚   â”œâ”€â”€ æ“ä½œæƒé™ (users:create, users:edit)
â”‚   â””â”€â”€ æ•°æ®æƒé™ (users:export)
â””â”€â”€ å­—æ®µæƒé™ (users:phone:view)
```

### 2. æƒé™æ£€æŸ¥å®ç°

**åˆ›å»ºæƒé™é’©å­**

```tsx
// hooks/usePermissions.ts
export const usePermissions = () => {
  const { user } = useAuth()
  
  const hasPermission = useCallback((permission: string) => {
    if (!user?.permissions) return false
    
    // æ£€æŸ¥æ˜¯å¦æœ‰è¶…çº§æƒé™
    if (user.permissions.includes('*')) return true
    
    // æ£€æŸ¥å…·ä½“æƒé™
    if (user.permissions.includes(permission)) return true
    
    // æ£€æŸ¥é€šé…ç¬¦æƒé™
    const parts = permission.split(':')
    for (let i = parts.length - 1; i > 0; i--) {
      const wildcard = parts.slice(0, i).join(':') + ':*'
      if (user.permissions.includes(wildcard)) return true
    }
    
    return false
  }, [user?.permissions])
  
  const hasAnyPermission = useCallback((permissions: string[]) => {
    return permissions.some(hasPermission)
  }, [hasPermission])
  
  const hasAllPermissions = useCallback((permissions: string[]) => {
    return permissions.every(hasPermission)
  }, [hasPermission])
  
  return { hasPermission, hasAnyPermission, hasAllPermissions }
}
```

**ç»„ä»¶çº§æƒé™æ§åˆ¶**

```tsx
// components/ProtectedComponent.tsx
interface ProtectedComponentProps {
  permission: string | string[]
  fallback?: React.ReactNode
  children: React.ReactNode
}

export const ProtectedComponent: React.FC<ProtectedComponentProps> = ({
  permission,
  fallback = null,
  children
}) => {
  const { hasPermission, hasAnyPermission } = usePermissions()
  
  const allowed = Array.isArray(permission) 
    ? hasAnyPermission(permission)
    : hasPermission(permission)
  
  return allowed ? <>{children}</> : <>{fallback}</>
}

// ä½¿ç”¨ç¤ºä¾‹
<ProtectedComponent permission="users:create">
  <Button type="primary">æ–°å»ºç”¨æˆ·</Button>
</ProtectedComponent>
```

**è·¯ç”±çº§æƒé™æ§åˆ¶**

```tsx
// middleware.ts
import { withAuth } from 'next-auth/middleware'

export default withAuth(
  function middleware(req) {
    const token = req.nextauth.token
    const pathname = req.nextUrl.pathname
    
    // æ£€æŸ¥è·¯ç”±æƒé™
    if (pathname.startsWith('/admin') && token?.role !== 'admin') {
      return NextResponse.redirect(new URL('/unauthorized', req.url))
    }
  },
  {
    callbacks: {
      authorized: ({ token }) => !!token
    }
  }
)
```

## ğŸ“Š æ•°æ®ç®¡ç†æœ€ä½³å®è·µ

### 1. çŠ¶æ€ç®¡ç†

**ä½¿ç”¨ Zustand è¿›è¡Œç®€å•çŠ¶æ€ç®¡ç†**

```tsx
// stores/useUserStore.ts
import { create } from 'zustand'
import { persist } from 'zustand/middleware'

interface UserState {
  users: User[]
  loading: boolean
  error: string | null
  fetchUsers: () => Promise<void>
  addUser: (user: User) => void
  updateUser: (id: string, user: Partial<User>) => void
  deleteUser: (id: string) => void
}

export const useUserStore = create<UserState>()(
  persist(
    (set, get) => ({
      users: [],
      loading: false,
      error: null,
      
      fetchUsers: async () => {
        set({ loading: true, error: null })
        try {
          const users = await api.getUsers()
          set({ users, loading: false })
        } catch (error) {
          set({ error: error.message, loading: false })
        }
      },
      
      addUser: (user) => {
        set(state => ({ users: [...state.users, user] }))
      },
      
      updateUser: (id, updatedUser) => {
        set(state => ({
          users: state.users.map(user => 
            user.id === id ? { ...user, ...updatedUser } : user
          )
        }))
      },
      
      deleteUser: (id) => {
        set(state => ({
          users: state.users.filter(user => user.id !== id)
        }))
      }
    }),
    {
      name: 'user-store',
      partialize: (state) => ({ users: state.users }) // åªæŒä¹…åŒ–ç”¨æˆ·æ•°æ®
    }
  )
)
```

### 2. æ•°æ®è·å–

**ä½¿ç”¨ TanStack Query ç®¡ç†æœåŠ¡ç«¯çŠ¶æ€**

```tsx
// hooks/useUsers.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'

export const useUsers = (params?: QueryParams) => {
  return useQuery({
    queryKey: ['users', params],
    queryFn: () => api.getUsers(params),
    staleTime: 5 * 60 * 1000, // 5åˆ†é’Ÿå†…æ•°æ®æ–°é²œ
    cacheTime: 10 * 60 * 1000, // 10åˆ†é’Ÿç¼“å­˜
  })
}

export const useCreateUser = () => {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: api.createUser,
    onSuccess: () => {
      // åˆ›å»ºæˆåŠŸåé‡æ–°è·å–æ•°æ®
      queryClient.invalidateQueries({ queryKey: ['users'] })
      message.success('åˆ›å»ºæˆåŠŸ')
    },
    onError: (error) => {
      message.error(`åˆ›å»ºå¤±è´¥: ${error.message}`)
    }
  })
}

export const useUpdateUser = () => {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: ({ id, data }: { id: string, data: Partial<User> }) =>
      api.updateUser(id, data),
    onSuccess: (updatedUser) => {
      // æ›´æ–°ç¼“å­˜ä¸­çš„æ•°æ®
      queryClient.setQueryData(
        ['users'],
        (oldData: User[]) => oldData?.map(user => 
          user.id === updatedUser.id ? updatedUser : user
        )
      )
      message.success('æ›´æ–°æˆåŠŸ')
    }
  })
}
```

### 3. è¡¨å•å¤„ç†

**ä½¿ç”¨ React Hook Form + Zod éªŒè¯**

```tsx
// lib/validations.ts
import { z } from 'zod'

export const userSchema = z.object({
  name: z.string().min(2, 'å§“åè‡³å°‘2ä¸ªå­—ç¬¦').max(20, 'å§“åæœ€å¤š20ä¸ªå­—ç¬¦'),
  email: z.string().email('è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€'),
  phone: z.string().regex(/^1[3-9]\d{9}$/, 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ‰‹æœºå·'),
  role: z.enum(['admin', 'user'], { required_error: 'è¯·é€‰æ‹©è§’è‰²' }),
  status: z.number().int().min(0).max(1)
})

export type UserFormData = z.infer<typeof userSchema>
```

```tsx
// components/UserForm.tsx
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'

export const UserForm: React.FC<UserFormProps> = ({ onSubmit, initialData }) => {
  const {
    register,
    handleSubmit,
    formState: { errors, isSubmitting },
    reset
  } = useForm<UserFormData>({
    resolver: zodResolver(userSchema),
    defaultValues: initialData
  })
  
  const onFormSubmit = async (data: UserFormData) => {
    try {
      await onSubmit(data)
      reset()
    } catch (error) {
      // é”™è¯¯å¤„ç†å·²åœ¨onSubmitä¸­å®Œæˆ
    }
  }
  
  return (
    <form onSubmit={handleSubmit(onFormSubmit)}>
      <div>
        <label>å§“å</label>
        <input {...register('name')} />
        {errors.name && <span>{errors.name.message}</span>}
      </div>
      
      <button type="submit" disabled={isSubmitting}>
        {isSubmitting ? 'æäº¤ä¸­...' : 'æäº¤'}
      </button>
    </form>
  )
}
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µ

### 1. ç»„ä»¶ä¼˜åŒ–

**ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“**

```tsx
// ä¼˜åŒ–åˆ—è¡¨é¡¹ç»„ä»¶
const UserItem = React.memo<UserItemProps>(({ user, onEdit, onDelete }) => {
  return (
    <div className="user-item">
      <span>{user.name}</span>
      <Button onClick={() => onEdit(user)}>ç¼–è¾‘</Button>
      <Button onClick={() => onDelete(user.id)}>åˆ é™¤</Button>
    </div>
  )
})

// ä½¿ç”¨ useCallback ç¨³å®šå‡½æ•°å¼•ç”¨
const UserList: React.FC = () => {
  const [users, setUsers] = useState<User[]>([])
  
  const handleEdit = useCallback((user: User) => {
    // ç¼–è¾‘é€»è¾‘
  }, [])
  
  const handleDelete = useCallback((id: string) => {
    // åˆ é™¤é€»è¾‘
  }, [])
  
  return (
    <div>
      {users.map(user => (
        <UserItem
          key={user.id}
          user={user}
          onEdit={handleEdit}
          onDelete={handleDelete}
        />
      ))}
    </div>
  )
}
```

### 2. æ•°æ®åŠ è½½ä¼˜åŒ–

**åˆ†é¡µåŠ è½½**

```tsx
const useUsersPagination = () => {
  const [page, setPage] = useState(1)
  const [pageSize, setPageSize] = useState(10)
  
  const { data, loading } = useQuery({
    queryKey: ['users', page, pageSize],
    queryFn: () => api.getUsers({ page, pageSize }),
    keepPreviousData: true // ä¿æŒä¸Šä¸€é¡µæ•°æ®ç›´åˆ°æ–°æ•°æ®åŠ è½½å®Œæˆ
  })
  
  return {
    data,
    loading,
    pagination: {
      current: page,
      pageSize,
      total: data?.total || 0,
      onChange: setPage,
      onShowSizeChange: (_, size) => {
        setPageSize(size)
        setPage(1) // é‡ç½®åˆ°ç¬¬ä¸€é¡µ
      }
    }
  }
}
```

**è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ•°æ®é‡ï¼‰**

```tsx
import { FixedSizeList as List } from 'react-window'

const VirtualizedTable: React.FC<{ data: any[] }> = ({ data }) => {
  const Row = ({ index, style }: { index: number, style: React.CSSProperties }) => (
    <div style={style}>
      {/* æ¸²æŸ“è¡Œå†…å®¹ */}
      <UserItem user={data[index]} />
    </div>
  )
  
  return (
    <List
      height={600}
      itemCount={data.length}
      itemSize={60}
    >
      {Row}
    </List>
  )
}
```

### 3. å›¾ç‰‡ä¼˜åŒ–

**ä½¿ç”¨ Next.js Image ç»„ä»¶**

```tsx
import Image from 'next/image'

const UserAvatar: React.FC<{ src: string, alt: string }> = ({ src, alt }) => {
  return (
    <Image
      src={src}
      alt={alt}
      width={40}
      height={40}
      className="rounded-full"
      placeholder="blur"
      blurDataURL="data:image/jpeg;base64,..." // æ¨¡ç³Šå ä½å›¾
    />
  )
}
```

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### 1. TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/hooks/*": ["./src/hooks/*"]
    }
  }
}
```

### 2. ESLint é…ç½®

```json
// .eslintrc.json
{
  "extends": [
    "next/core-web-vitals",
    "@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "prefer-const": "error",
    "no-var": "error"
  }
}
```

### 3. Prettier é…ç½®

```json
// .prettierrc
{
  "semi": false,
  "trailingComma": "es5",
  "singleQuote": true,
  "tabWidth": 2,
  "useTabs": false,
  "printWidth": 80,
  "bracketSpacing": true,
  "arrowParens": "avoid"
}
```

## ğŸ§ª æµ‹è¯•æœ€ä½³å®è·µ

### 1. å•å…ƒæµ‹è¯•

```tsx
// __tests__/components/UserForm.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { UserForm } from '@/components/UserForm'

describe('UserForm', () => {
  const mockOnSubmit = jest.fn()
  
  beforeEach(() => {
    mockOnSubmit.mockClear()
  })
  
  it('åº”è¯¥æ­£ç¡®æäº¤è¡¨å•', async () => {
    render(<UserForm onSubmit={mockOnSubmit} />)
    
    fireEvent.change(screen.getByLabelText('å§“å'), {
      target: { value: 'å¼ ä¸‰' }
    })
    fireEvent.change(screen.getByLabelText('é‚®ç®±'), {
      target: { value: 'zhangsan@example.com' }
    })
    
    fireEvent.click(screen.getByText('æäº¤'))
    
    await waitFor(() => {
      expect(mockOnSubmit).toHaveBeenCalledWith({
        name: 'å¼ ä¸‰',
        email: 'zhangsan@example.com'
      })
    })
  })
  
  it('åº”è¯¥æ˜¾ç¤ºéªŒè¯é”™è¯¯', async () => {
    render(<UserForm onSubmit={mockOnSubmit} />)
    
    fireEvent.click(screen.getByText('æäº¤'))
    
    await waitFor(() => {
      expect(screen.getByText('å§“åè‡³å°‘2ä¸ªå­—ç¬¦')).toBeInTheDocument()
    })
  })
})
```

### 2. é›†æˆæµ‹è¯•

```tsx
// __tests__/pages/users.test.tsx
import { render, screen, waitFor } from '@testing-library/react'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import UsersPage from '@/app/users/page'

const createTestQueryClient = () => new QueryClient({
  defaultOptions: {
    queries: { retry: false },
    mutations: { retry: false }
  }
})

describe('Users Page', () => {
  it('åº”è¯¥æ˜¾ç¤ºç”¨æˆ·åˆ—è¡¨', async () => {
    const queryClient = createTestQueryClient()
    
    render(
      <QueryClientProvider client={queryClient}>
        <UsersPage />
      </QueryClientProvider>
    )
    
    await waitFor(() => {
      expect(screen.getByText('ç”¨æˆ·ç®¡ç†')).toBeInTheDocument()
    })
  })
})
```

## ğŸ“¦ éƒ¨ç½²æœ€ä½³å®è·µ

### 1. ç¯å¢ƒå˜é‡ç®¡ç†

```bash
# .env.local (å¼€å‘ç¯å¢ƒ)
NEXT_PUBLIC_API_URL=http://localhost:3001
DATABASE_URL=postgresql://localhost:5432/admin_dev
NEXTAUTH_SECRET=dev-secret-key

# .env.production (ç”Ÿäº§ç¯å¢ƒ)
NEXT_PUBLIC_API_URL=https://api.production.com
DATABASE_URL=postgresql://prod-server:5432/admin_prod
NEXTAUTH_SECRET=prod-secret-key
```

### 2. Docker é…ç½®

```dockerfile
# Dockerfile
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

COPY . .
RUN npm run build

FROM node:18-alpine AS runner
WORKDIR /app

COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

EXPOSE 3000
CMD ["node", "server.js"]
```

### 3. CI/CD é…ç½®

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: 18
      - run: npm ci
      - run: npm run test
      - run: npm run build
      
  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### 1. é”™è¯¯ç›‘æ§

```tsx
// lib/errorHandler.ts
import * as Sentry from '@sentry/nextjs'

export const initSentry = () => {
  Sentry.init({
    dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
    environment: process.env.NODE_ENV
  })
}

export const logError = (error: Error, context?: any) => {
  console.error('Error:', error)
  Sentry.captureException(error, { extra: context })
}
```

### 2. æ€§èƒ½ç›‘æ§

```tsx
// lib/analytics.ts
export const trackPageView = (url: string) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('config', 'GA_MEASUREMENT_ID', {
      page_location: url
    })
  }
}

export const trackEvent = (action: string, category: string, label?: string) => {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', action, {
      event_category: category,
      event_label: label
    })
  }
}
```

## ğŸ“š ä»£ç è§„èŒƒ

### 1. å‘½åè§„èŒƒ

- **ç»„ä»¶å**ï¼šä½¿ç”¨ PascalCaseï¼Œå¦‚ `UserForm`
- **æ–‡ä»¶å**ï¼šç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCaseï¼Œå·¥å…·æ–‡ä»¶ä½¿ç”¨ camelCase
- **å˜é‡å**ï¼šä½¿ç”¨ camelCase
- **å¸¸é‡å**ï¼šä½¿ç”¨ UPPER_SNAKE_CASE
- **æ¥å£å**ï¼šä½¿ç”¨ PascalCaseï¼Œä»¥ I å¼€å¤´ï¼ˆå¯é€‰ï¼‰

### 2. æ³¨é‡Šè§„èŒƒ

```tsx
/**
 * ç”¨æˆ·è¡¨å•ç»„ä»¶
 * @param user - ç”¨æˆ·æ•°æ®ï¼ˆç¼–è¾‘æ¨¡å¼æ—¶ä¼ å…¥ï¼‰
 * @param onSubmit - æäº¤å›è°ƒå‡½æ•°
 * @param loading - æ˜¯å¦æ­£åœ¨åŠ è½½
 */
interface UserFormProps {
  user?: User
  onSubmit: (data: UserFormData) => Promise<void>
  loading?: boolean
}

export const UserForm: React.FC<UserFormProps> = ({
  user,
  onSubmit,
  loading = false
}) => {
  // è¡¨å•é€»è¾‘
}
```

### 3. æäº¤è§„èŒƒ

```bash
# æäº¤ä¿¡æ¯æ ¼å¼
type(scope): description

# ç±»å‹
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤
docs:     æ–‡æ¡£
style:    æ ¼å¼
refactor: é‡æ„
test:     æµ‹è¯•
chore:    æ„å»º/å·¥å…·

# ç¤ºä¾‹
feat(user): æ·»åŠ ç”¨æˆ·å¯¼å‡ºåŠŸèƒ½
fix(table): ä¿®å¤åˆ†é¡µæ˜¾ç¤ºé—®é¢˜
docs(readme): æ›´æ–°å®‰è£…è¯´æ˜
```

## ğŸ”— èµ„æºæ¨è

### å¼€å‘å·¥å…·
- [VS Code](https://code.visualstudio.com/) - ç¼–è¾‘å™¨
- [React DevTools](https://react.dev/learn/react-developer-tools) - Reactè°ƒè¯•
- [TanStack Query DevTools](https://tanstack.com/query/latest/docs/react/devtools) - æ•°æ®çŠ¶æ€è°ƒè¯•

### å­¦ä¹ èµ„æº
- [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs)
- [React å®˜æ–¹æ–‡æ¡£](https://react.dev/)
- [Ant Design å®˜æ–¹æ–‡æ¡£](https://ant.design/)
- [TailwindCSS å®˜æ–¹æ–‡æ¡£](https://tailwindcss.com/)

### éƒ¨ç½²å¹³å°
- [Vercel](https://vercel.com/) - æ¨èç”¨äºNext.jsé¡¹ç›®
- [Netlify](https://netlify.com/) - é™æ€ç«™ç‚¹éƒ¨ç½²
- [AWS](https://aws.amazon.com/) - ä¼ä¸šçº§éƒ¨ç½²
- [é˜¿é‡Œäº‘](https://www.aliyun.com/) - å›½å†…éƒ¨ç½²